<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management</title>
    <style>
        /* Add some basic styling */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        input[type="text"] {
            padding: 8px;
            margin-right: 10px;
        }
        button {
            padding: 8px 12px;
            cursor: pointer;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <!-- Form for adding a new user -->
    <h2>Add New User:</h2>
    <input type="text" id="nameInput" placeholder="Name">
    <input type="text" id="emailInput" placeholder="Email">
    <button onclick="addUser()">Add User</button>

    <!-- Button to refresh the user list -->
    <button onclick="getUsers()">Refresh User List</button>

    <!-- User list -->
    <h2>User List:</h2>
    <ul id="userList"></ul>

    <script>
        // Function to add a new user
        function addUser() {
            var name = document.getElementById("nameInput").value;
            var email = document.getElementById("emailInput").value;

            // Make a POST request to your API to add the user
            fetch('/api/users/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name: name, email: email })
            })
            .then(response => response.text())
            .then(message => {
                alert(message); // Display response message
                getUsers(); // Refresh user list
            })
            .catch(error => console.error('Error:', error));
        }

        // Function to fetch all users from the API
        function getUsers() {
            // Make a GET request to your API to fetch all users
            fetch('/api/users')
            .then(response => response.json())
            .then(users => {
                // Clear the user list
                document.getElementById("userList").innerHTML = '';

                // Append each user to the user list
                users.forEach(user => {
                    var listItem = document.createElement("li");
                    listItem.textContent = user.name + ' - ' + user.email;
                    document.getElementById("userList").appendChild(listItem);
                });
            })
            .catch(error => console.error('Error:', error));
        }

        // Initial fetch of users when the page loads
        getUsers();
    </script>
</body>
</html>
